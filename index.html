<!DOCTYPE html>
<head>
  <style>
    html {
      height: 100%;
    }
    body {
      font-family: courier;
      height: 100%;
    }
  </style>
  <script src="sql.js"></script>
  <script>
    function loadSql(fname) {
      var xmlhttp;
      xmlhttp = new XMLHttpRequest(); // IE7+, Firefox, Chrome, Opera, Safari
      xmlhttp.onreadystatechange=function() {
        if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
          document.getElementById("input").value = xmlhttp.responseText;
        }
      }
      xmlhttp.open("GET", fname, true);
      xmlhttp.send();
    }

    // Connect to the HTML element we 'print' to
    function print(text) {
      var element = document.getElementById('output');
      element.innerHTML = text.replace(/\n/g, "<br/>");
    }

    // Open a database
    var db = SQL.open();

    // Run a command in the database
    function execute(commands) {
      try {
        //var data = db.exec(commands.replace(/\n/g, '; '));
        var data = db.exec(commands);
        print(JSON.stringify(data, null, '  '));
      } catch(e) {
        print(e);
      }
    }

    function run() {
      var command = document.getElementById('input').value;
      console.log(command);
      execute(command);
    }
  </script>
</head>
<body onload="loadSql('tutorial0.sql')">
  <table style="width:100%; height:100%;">
    <tr style="height:1px"><td colspan=2>
      <h2>
        SQL(ite3) JS Engine
      </h2>
      <a href="http://www.sqlite.org/download.html">Download</a> - choose the first download under the heading "Precompiled Binaries for (Mac OS X/Windows/Linux)"
      <br/>
      Then just click it or open a Terminal or Command Line and enter "sqlite3" (OS X/Linux) or "sqlite3.exe" (Windows)
    </td></tr>
    <tr style="height:1px"><td>
      <input type="button" value="Run" onclick="run()"/>
    </td><td>
      Output:
    </td></tr>
    <tr><td style="width:45%">
      <textarea id="input" style="width:100%; height:100%;"></textarea>
    </td><td style="width:50%">
      <div id="output" style="margin-left:10px; margin-top: 10px; display:inline-block; width:100%; height:100%;"></div>
    </td></tr>
  </table>
</body>
</html>
